diff -EbBc ./gfile.cc D:\Projects\poppler\mypoppler\goo/gfile.cc
*** ./gfile.cc	Mon Apr  4 23:02:06 2005
--- D:\Projects\poppler\mypoppler\goo/gfile.cc	Tue Jan 31 18:18:36 2006
***************
*** 20,26 ****
  #  endif
  #  include <limits.h>
  #  include <string.h>
! #  if !defined(VMS) && !defined(ACORN) && !defined(MACOS)
  #    include <pwd.h>
  #  endif
  #  if defined(VMS) && (__DECCXX_VER < 50200000)
--- 20,26 ----
  #  endif
  #  include <limits.h>
  #  include <string.h>
! #  if !defined(VMS) && !defined(ACORN) && !defined(MACOS) && !defined(OS2)
  #    include <pwd.h>
  #  endif
  #  if defined(VMS) && (__DECCXX_VER < 50200000)
***************
*** 43,49 ****
    //---------- VMS ----------
    return new GooString("SYS$LOGIN:");
  
! #elif defined(__EMX__) || defined(WIN32)
    //---------- OS/2+EMX and Win32 ----------
    char *s;
    GooString *ret;
--- 43,49 ----
    //---------- VMS ----------
    return new GooString("SYS$LOGIN:");
  
! #elif defined(__EMX__) || defined(WIN32) || defined(OS2)
    //---------- OS/2+EMX and Win32 ----------
    char *s;
    GooString *ret;
***************
*** 192,198 ****
    }
    return path;
  
! #elif defined(__EMX__)
    //---------- OS/2+EMX ----------
    int i;
  
--- 192,198 ----
    }
    return path;
  
! #elif defined(__EMX__) || defined(OS2)
    //---------- OS/2+EMX ----------
    int i;
  
***************
*** 279,285 ****
      return new GooString(fileName, p + 1 - fileName);
    return new GooString();
  
! #elif defined(__EMX__) || defined(WIN32)
    //---------- OS/2+EMX and Win32 ----------
    char *p;
  
--- 279,285 ----
      return new GooString(fileName, p + 1 - fileName);
    return new GooString();
  
! #elif defined(__EMX__) || defined(WIN32) || defined(OS2)
    //---------- OS/2+EMX and Win32 ----------
    char *p;
  
***************
*** 323,329 ****
    return strchr(path, ':') ||
  	 (path[0] == '[' && path[1] != '.' && path[1] != '-');
  
! #elif defined(__EMX__) || defined(WIN32)
    //---------- OS/2+EMX and Win32 ----------
    return path[0] == '/' || path[0] == '\\' || path[1] == ':';
  
--- 323,329 ----
    return strchr(path, ':') ||
  	 (path[0] == '[' && path[1] != '.' && path[1] != '-');
  
! #elif defined(__EMX__) || defined(WIN32) || defined(OS2)
    //---------- OS/2+EMX and Win32 ----------
    return path[0] == '/' || path[0] == '\\' || path[1] == ':';
  
***************
*** 377,382 ****
--- 377,394 ----
    path->del(0, 1);
    return path;
  
+ #elif defined(OS2)
+   //---------- OS/2 -----------
+   char buf[_MAX_PATH];
+   buf[0] = '\0';
+   if (!_fullpath( buf, path->getCString(), _MAX_PATH ) ) {
+     path->clear();
+     return path;
+   }
+   path->clear();
+   path->append(buf);
+   return path;
+   
  #else
    //---------- Unix and OS/2+EMX ----------
    struct passwd *pw;
***************
*** 455,461 ****
      return gFalse;
    }
    return gTrue;
! #elif defined(VMS) || defined(__EMX__) || defined(ACORN) || defined(MACOS)
    //---------- non-Unix ----------
    char *s;
  
--- 467,473 ----
      return gFalse;
    }
    return gTrue;
! #elif defined(VMS) || defined(__EMX__) || defined(ACORN) || defined(MACOS) || defined(OS2)
    //---------- non-Unix ----------
    char *s;
  
diff -EbBc ./gfile.h D:\Projects\poppler\mypoppler\goo/gfile.h
*** ./gfile.h	Thu Mar  3 21:45:58 2005
--- D:\Projects\poppler\mypoppler\goo/gfile.h	Mon Jan 30 19:19:46 2006
***************
*** 45,50 ****
--- 45,53 ----
  #    if HAVE_NDIR_H
  #      include <ndir.h>
  #    endif
+ #    if HAVE_DIRECT_H
+ #      include <direct.h>
+ #    endif
  #  endif
  #endif
  }
